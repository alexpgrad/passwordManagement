# SafeKey Password Manager
SafeKey is a password manager app built in python that connects to a psql database. Features include a UI using customtkinter, MFA using qrcode and pyotp, and encryption/decryption using cryptography. 
Architecture
1. Technologies Used: 
   1. Python: The backend and frontend were both created using python. I used a python library called customtkinter that allows you to develop UIs to accept user input, create buttons, and more. 
   2. PostgreSQL: Used a relational database running on port 5432. I created two tables, one to store username and password (in SHA 256) and another table to store any accounts you want to store. 
   3. Cryptography Library (Fernet): Allows you to encrypt and decrypt passwords. Passwords are stored with encryption into the database, and are then decrypted after successful login. 
   4. pyOTP: Developed MFA using one-time passwords. These codes are meant to be scanned using existing authenticator apps. 
2. Security Features: 
   1. Encryption/Decryption: Storing passwords in plaintext is a huge security risk. To avoid storing passwords in plaintext, I used Fernet symmetric encryption. 
   2. Hashing: Accounts to the password manager are hashed using SHA-256 and are appended with a salt value for additional security. 
   3. Multi-Factor Authentication: Every user who signs up for an account is assigned a secret key, which we use to generate OTPs. 

Core Functionalities
1. User Registration
   1. Checks to see if the username already exists. 
   2. Hashes the password using SHA-256 with a salt value appended. 
   3. Stores username, hashed password, salt, and a secret key (for MFA) into the database.
2. Storing/Retrieving Password Information
   1. Encrypts user passwords using the cryptography library before storing them into the database. 
   2. Stores username, email, URL, and site name.
   3. Has functionality for associating each password with time created information and last login time. 
   4. Fetches account data stored in the database and decrypts passwords before displaying them in the UI.
3. Custom UI
   1. Used customtkinter to develop the UI for the app. This python library helps add button functionality, styling, and more. 
      1. Login page, sign up page, UI for displaying account information, and a UI for adding password information into the database. 
   2. Used tkinter to create windows for the app, as well as to create message boxes (like the box for entering the MFA code). 
   3. Used the Pillow library to convert .png images into a format that tkinter could process.
  
Libraries Used
1. python3 -m pip install psycopg2
2. python3 -m pip install cryptography
3. python3 -m pip install customtkinter
4. python3 -m pip install tk
5. python3 -m pip install ctktable
6. python3 -m pip install Pillow
7. python3 -m pip install qrcode
8. python3 -m pip install pyotp

Running the Python Script 
1. First, you are going to need to set up a postgresql database. You can follow the directions on how to do so by visiting the following link: https://www.postgresql.org/docs/current/sql-createdatabase.html
   1. You should now update database.ini to include the host, database name, user, and password information. 
   2. For creating tables, refer to the setup_database file in the repository.
2. cd to the repository and create a virtual environment. 
   1. python3 -m venv venv
   2. source venv/bin/activate
3. Now, you can launch the app by entering:
   1. python3 main.py
  
Account Setup and App Navigation
1. The first window that will open after running main.py will be the ‘SafeKey Login’ window.
2. Assuming this is your first time using the app, click the ‘Sign up’ button at the bottom of the screen. 
3. This will open the ‘Sign up’ window. You need to enter a username, password and confirm password. 
4. After entering these details, a window with a QR code will be displayed. You should scan this image with an authenticator app (like Google Authenticator). This will generate one-time passwords required for logging in. 
5. With your account setup, you can enter the username and password you created in the previous step. You will be prompted to also enter a six digit code generated by Google Authenticator. 
6. Once successfully logged in, a new window will open with all your stored data. 
7. You can add account information by clicking the ‘+ New Password’ button in the top right corner. Currently, you need to close and re-run the program for any changes to be reflected in the UI table.

Suggestion for Future Work

One of my main motivations was to create a secure password manager. Many of the projects with similar scope do not implement MFA, and some even store passwords in plain-text. I would like to continue working on this project to make it even more secure. We could try SQL injection attacks, use stronger hashing methods, implement limiting mechanisms to prevent brute force attacks. 
Additionally, I would like to further enhance the UI. There is potential to add more button functionality (currently the buttons on the sidebar do not do anything). Moreover, while customtkinter provide great flexibility and was easy to use, we could explore other python libraries to see how we can make the app look sleek and modern. However, the current implementation for the UI is a great start. Similar projects on github lack a UI for their password manager and rely on command prompts– or have very simple UIs with only two entries for a username and password. 
Lastly, I am happy to provide this code as an open-source project so that others can continue working on and testing the app. In doing so, people or small companies can have a foundation to develop their own password manager with features like MFA, encryption/decryption, and more.
